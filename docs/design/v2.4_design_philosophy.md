# Intro

For v2.4 the logic core was rebuilt to help make the general architecture more modular.

Here are a few basic thesis or principles which guided the design:

1. No object should have a method or private data member whose state and ownership is not entirely internal. Objects should not share memory or responsibilities with others. This means many would-be classes, if they'd have a bunch of get/set methods are instead structs, and what would be their methods belong to whoever owns them or are defined as pure functions that take the struct as a parameter.
2. Related, objects may not require mutual cognizance of each other. That is, for example, Wires can't need to know about Junctions while at the same time Junctions know about Wires. If they appear to need to, the functionality should normally be moved out to whoever will own the wire and junction instances.
3. Composition is generally better than inheritance. Inheritance should be restricted to speaking of true abstractions, not obfuscation, reducing code-reuse and/or providing added functionality. That's better done via composition. Inheritance is best kept shallow. Again, this pushes the code towards a heavier use of structs, pure functions, and concentrates state-management in whatever class owns the stateful data.
4. A feature doesn't exist if it's not shown to exist through tests. If a tree falls in the forest and there is no test that caught it then no, it doesn't make any sound. The restriction of state management to less of the code-base makes thorough unit testing much easier and permits a higher degree of confidence in the final behavior of the product.
5. "If you `new` it you `delete` it." Since we don't share responsibility for state between objects, in only rare cases should anyone have a ptr they don't own. A weak reference is better. So, most every ptr should be a `std::unique_ptr` and per the intended meaning of a `unique_ptr`, it should be truly unique. Given principle `1` above many cases where you would use a ptr will already be handled by whoever owns the object the ptr references.
